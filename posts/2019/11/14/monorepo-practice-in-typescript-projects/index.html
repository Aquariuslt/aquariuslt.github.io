<!DOCTYPE html><html lang="zh"><head><meta charset="UTF-8"><title>Monorepo Practice in TypeScript Projects - zexo.dev</title><meta name="viewport" content="minimum-scale=1,initial-scale=1,width=device-width,shrink-to-fit=no"><script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script><script async="" src="https://www.googletagmanager.com/gtm.js?id=GTM-TS7Z4BQ"></script><script>(function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-TS7Z4BQ');</script><link rel="icon" href="/favicon.png"><link rel="shortcut icon" href="/static/img/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/static/img/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/static/img/favicon-32x32.png"><link rel="icon" type="image/png" sizes="48x48" href="/static/img/favicon-48x48.png"><link rel="manifest" href="/static/img/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="theme-color" content="#FFFFFF"><meta name="application-name" content="zexo.dev"><link rel="apple-touch-icon" sizes="57x57" href="/static/img/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/static/img/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/static/img/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/static/img/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/static/img/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/static/img/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/static/img/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/static/img/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="167x167" href="/static/img/apple-touch-icon-167x167.png"><link rel="apple-touch-icon" sizes="180x180" href="/static/img/apple-touch-icon-180x180.png"><link rel="apple-touch-icon" sizes="1024x1024" href="/static/img/apple-touch-icon-1024x1024.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="apple-mobile-web-app-title" content="zexo.dev"><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/static/img/apple-touch-startup-image-640x1136.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/static/img/apple-touch-startup-image-750x1334.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/static/img/apple-touch-startup-image-828x1792.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/static/img/apple-touch-startup-image-1125x2436.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/static/img/apple-touch-startup-image-1242x2208.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/static/img/apple-touch-startup-image-1242x2688.png"><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/static/img/apple-touch-startup-image-1536x2048.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/static/img/apple-touch-startup-image-1668x2224.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/static/img/apple-touch-startup-image-1668x2388.png"><link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/static/img/apple-touch-startup-image-2048x2732.png"><link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/static/img/apple-touch-startup-image-1620x2160.png"><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/static/img/apple-touch-startup-image-1136x640.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/static/img/apple-touch-startup-image-1334x750.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/static/img/apple-touch-startup-image-1792x828.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/static/img/apple-touch-startup-image-2436x1125.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/static/img/apple-touch-startup-image-2208x1242.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/static/img/apple-touch-startup-image-2688x1242.png"><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/static/img/apple-touch-startup-image-2048x1536.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/static/img/apple-touch-startup-image-2224x1668.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/static/img/apple-touch-startup-image-2388x1668.png"><link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/static/img/apple-touch-startup-image-2732x2048.png"><link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/static/img/apple-touch-startup-image-2160x1620.png"><link rel="icon" type="image/png" sizes="228x228" href="/static/img/coast-228x228.png"><meta name="msapplication-TileColor" content="#FFFFFF"><meta name="msapplication-TileImage" content="/static/img/mstile-144x144.png"><meta name="msapplication-config" content="/static/img/browserconfig.xml"><link rel="yandex-tableau-widget" href="/static/img/yandex-browser-manifest.json"><link href="/static/css/vendors.3f9647fd81d5343b4184.css" rel="stylesheet"><link href="/static/css/main.cb992bfb23ee693ba85e.css" rel="stylesheet"><link as="style" href="/static/css/detail.eef0a95b21d980f3da6b.css" rel="preload"><link as="style" href="/static/css/main.cb992bfb23ee693ba85e.css" rel="preload"><link as="style" href="/static/css/vendors.3f9647fd81d5343b4184.css" rel="preload"><link as="script" href="/static/js/detail.eef0a95b21d980f3da6b.js" rel="preload"><link as="script" href="/static/js/main.cb992bfb23ee693ba85e.js" rel="preload"><link as="script" href="/static/js/vendors.3f9647fd81d5343b4184.js" rel="preload"><style data-jss="" data-meta="MuiPaper">
.MuiPaper-root {
  color: rgba(0, 0, 0, 0.87);
  transition: box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  background-color: #FFFFFF;
}
.MuiPaper-rounded {
  border-radius: 4px;
}
.MuiPaper-outlined {
  border: 1px solid rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation0 {
  box-shadow: none;
}
.MuiPaper-elevation1 {
  box-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);
}
.MuiPaper-elevation2 {
  box-shadow: 0px 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 1px 5px 0px rgba(0,0,0,0.12);
}
.MuiPaper-elevation3 {
  box-shadow: 0px 3px 3px -2px rgba(0,0,0,0.2),0px 3px 4px 0px rgba(0,0,0,0.14),0px 1px 8px 0px rgba(0,0,0,0.12);
}
.MuiPaper-elevation4 {
  box-shadow: 0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12);
}
.MuiPaper-elevation5 {
  box-shadow: 0px 3px 5px -1px rgba(0,0,0,0.2),0px 5px 8px 0px rgba(0,0,0,0.14),0px 1px 14px 0px rgba(0,0,0,0.12);
}
.MuiPaper-elevation6 {
  box-shadow: 0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);
}
.MuiPaper-elevation7 {
  box-shadow: 0px 4px 5px -2px rgba(0,0,0,0.2),0px 7px 10px 1px rgba(0,0,0,0.14),0px 2px 16px 1px rgba(0,0,0,0.12);
}
.MuiPaper-elevation8 {
  box-shadow: 0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12);
}
.MuiPaper-elevation9 {
  box-shadow: 0px 5px 6px -3px rgba(0,0,0,0.2),0px 9px 12px 1px rgba(0,0,0,0.14),0px 3px 16px 2px rgba(0,0,0,0.12);
}
.MuiPaper-elevation10 {
  box-shadow: 0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12);
}
.MuiPaper-elevation11 {
  box-shadow: 0px 6px 7px -4px rgba(0,0,0,0.2),0px 11px 15px 1px rgba(0,0,0,0.14),0px 4px 20px 3px rgba(0,0,0,0.12);
}
.MuiPaper-elevation12 {
  box-shadow: 0px 7px 8px -4px rgba(0,0,0,0.2),0px 12px 17px 2px rgba(0,0,0,0.14),0px 5px 22px 4px rgba(0,0,0,0.12);
}
.MuiPaper-elevation13 {
  box-shadow: 0px 7px 8px -4px rgba(0,0,0,0.2),0px 13px 19px 2px rgba(0,0,0,0.14),0px 5px 24px 4px rgba(0,0,0,0.12);
}
.MuiPaper-elevation14 {
  box-shadow: 0px 7px 9px -4px rgba(0,0,0,0.2),0px 14px 21px 2px rgba(0,0,0,0.14),0px 5px 26px 4px rgba(0,0,0,0.12);
}
.MuiPaper-elevation15 {
  box-shadow: 0px 8px 9px -5px rgba(0,0,0,0.2),0px 15px 22px 2px rgba(0,0,0,0.14),0px 6px 28px 5px rgba(0,0,0,0.12);
}
.MuiPaper-elevation16 {
  box-shadow: 0px 8px 10px -5px rgba(0,0,0,0.2),0px 16px 24px 2px rgba(0,0,0,0.14),0px 6px 30px 5px rgba(0,0,0,0.12);
}
.MuiPaper-elevation17 {
  box-shadow: 0px 8px 11px -5px rgba(0,0,0,0.2),0px 17px 26px 2px rgba(0,0,0,0.14),0px 6px 32px 5px rgba(0,0,0,0.12);
}
.MuiPaper-elevation18 {
  box-shadow: 0px 9px 11px -5px rgba(0,0,0,0.2),0px 18px 28px 2px rgba(0,0,0,0.14),0px 7px 34px 6px rgba(0,0,0,0.12);
}
.MuiPaper-elevation19 {
  box-shadow: 0px 9px 12px -6px rgba(0,0,0,0.2),0px 19px 29px 2px rgba(0,0,0,0.14),0px 7px 36px 6px rgba(0,0,0,0.12);
}
.MuiPaper-elevation20 {
  box-shadow: 0px 10px 13px -6px rgba(0,0,0,0.2),0px 20px 31px 3px rgba(0,0,0,0.14),0px 8px 38px 7px rgba(0,0,0,0.12);
}
.MuiPaper-elevation21 {
  box-shadow: 0px 10px 13px -6px rgba(0,0,0,0.2),0px 21px 33px 3px rgba(0,0,0,0.14),0px 8px 40px 7px rgba(0,0,0,0.12);
}
.MuiPaper-elevation22 {
  box-shadow: 0px 10px 14px -6px rgba(0,0,0,0.2),0px 22px 35px 3px rgba(0,0,0,0.14),0px 8px 42px 7px rgba(0,0,0,0.12);
}
.MuiPaper-elevation23 {
  box-shadow: 0px 11px 14px -7px rgba(0,0,0,0.2),0px 23px 36px 3px rgba(0,0,0,0.14),0px 9px 44px 8px rgba(0,0,0,0.12);
}
.MuiPaper-elevation24 {
  box-shadow: 0px 11px 15px -7px rgba(0,0,0,0.2),0px 24px 38px 3px rgba(0,0,0,0.14),0px 9px 46px 8px rgba(0,0,0,0.12);
}
</style><style data-jss="" data-meta="MuiTouchRipple">
.MuiTouchRipple-root {
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 0;
  overflow: hidden;
  position: absolute;
  border-radius: inherit;
  pointer-events: none;
}
.MuiTouchRipple-ripple {
  opacity: 0;
  position: absolute;
}
.MuiTouchRipple-rippleVisible {
  opacity: 0.3;
  animation: MuiTouchRipple-keyframes-enter 550ms cubic-bezier(0.4, 0, 0.2, 1);
  transform: scale(1);
}
.MuiTouchRipple-ripplePulsate {
  animation-duration: 200ms;
}
.MuiTouchRipple-child {
  width: 100%;
  height: 100%;
  display: block;
  opacity: 1;
  border-radius: 50%;
  background-color: currentColor;
}
.MuiTouchRipple-childLeaving {
  opacity: 0;
  animation: MuiTouchRipple-keyframes-exit 550ms cubic-bezier(0.4, 0, 0.2, 1);
}
.MuiTouchRipple-childPulsate {
  top: 0;
  left: 0;
  position: absolute;
  animation: MuiTouchRipple-keyframes-pulsate 2500ms cubic-bezier(0.4, 0, 0.2, 1) 200ms infinite;
}
@-webkit-keyframes MuiTouchRipple-keyframes-enter {
  0% {
    opacity: 0.1;
    transform: scale(0);
  }
  100% {
    opacity: 0.3;
    transform: scale(1);
  }
}
@-webkit-keyframes MuiTouchRipple-keyframes-exit {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}
@-webkit-keyframes MuiTouchRipple-keyframes-pulsate {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.92);
  }
  100% {
    transform: scale(1);
  }
}
</style><style data-jss="" data-meta="MuiButtonBase">
.MuiButtonBase-root {
  color: inherit;
  border: 0;
  cursor: pointer;
  margin: 0;
  display: inline-flex;
  outline: 0;
  padding: 0;
  position: relative;
  align-items: center;
  user-select: none;
  border-radius: 0;
  vertical-align: middle;
  -moz-appearance: none;
  justify-content: center;
  text-decoration: none;
  background-color: transparent;
  -webkit-appearance: none;
  -webkit-tap-highlight-color: transparent;
}
.MuiButtonBase-root::-moz-focus-inner {
  border-style: none;
}
.MuiButtonBase-root.Mui-disabled {
  cursor: default;
  pointer-events: none;
}
@media print {
  .MuiButtonBase-root {
    -webkit-print-color-adjust: exact;
  }
}
</style><style data-jss="" data-meta="MuiTypography">
.MuiTypography-root {
  margin: 0;
  font-family: Roboto, XHei, -apple-system, BlinkMacSystemFont, PingFang SC, Hiragino Sans GB, Microsoft YaHei,
    WenQuanYi Micro Hei, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;
}
.MuiTypography-body2 {
  font-size: 0.875rem;
  font-family: Roboto, XHei, -apple-system, BlinkMacSystemFont, PingFang SC, Hiragino Sans GB, Microsoft YaHei,
    WenQuanYi Micro Hei, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;
  font-weight: 400;
  line-height: 1.43;
  letter-spacing: 0.01071em;
}
.MuiTypography-body1 {
  font-size: 1rem;
  font-family: Roboto, XHei, -apple-system, BlinkMacSystemFont, PingFang SC, Hiragino Sans GB, Microsoft YaHei,
    WenQuanYi Micro Hei, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;
  font-weight: 400;
  line-height: 1.5;
  letter-spacing: 0.00938em;
}
.MuiTypography-caption {
  font-size: 0.75rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 1.66;
  letter-spacing: 0.03333em;
}
.MuiTypography-button {
  font-size: 0.875rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 500;
  line-height: 1.75;
  letter-spacing: 0.02857em;
  text-transform: uppercase;
}
.MuiTypography-h1 {
  font-size: 6rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 300;
  line-height: 1.167;
  letter-spacing: -0.01562em;
}
.MuiTypography-h2 {
  font-size: 3.75rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 300;
  line-height: 1.2;
  letter-spacing: -0.00833em;
}
.MuiTypography-h3 {
  font-size: 3rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 1.167;
  letter-spacing: 0em;
}
.MuiTypography-h4 {
  font-size: 2.125rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 1.235;
  letter-spacing: 0.00735em;
}
.MuiTypography-h5 {
  font-size: 1.5rem;
  font-family: Roboto, XHei, -apple-system, BlinkMacSystemFont, PingFang SC, Hiragino Sans GB, Microsoft YaHei,
    WenQuanYi Micro Hei, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;
  font-weight: 400;
  line-height: 1.334;
  letter-spacing: 0em;
}
.MuiTypography-h6 {
  font-size: 1.25rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 500;
  line-height: 1.6;
  letter-spacing: 0.0075em;
}
.MuiTypography-subtitle1 {
  font-size: 1rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 1.75;
  letter-spacing: 0.00938em;
}
.MuiTypography-subtitle2 {
  font-size: 0.875rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 500;
  line-height: 1.57;
  letter-spacing: 0.00714em;
}
.MuiTypography-overline {
  font-size: 0.75rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 2.66;
  letter-spacing: 0.08333em;
  text-transform: uppercase;
}
.MuiTypography-srOnly {
  width: 1px;
  height: 1px;
  overflow: hidden;
  position: absolute;
}
.MuiTypography-alignLeft {
  text-align: left;
}
.MuiTypography-alignCenter {
  text-align: center;
}
.MuiTypography-alignRight {
  text-align: right;
}
.MuiTypography-alignJustify {
  text-align: justify;
}
.MuiTypography-noWrap {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
.MuiTypography-gutterBottom {
  margin-bottom: 0.35em;
}
.MuiTypography-paragraph {
  margin-bottom: 16px;
}
.MuiTypography-colorInherit {
  color: inherit;
}
.MuiTypography-colorPrimary {
  color: #FFFFFF;
}
.MuiTypography-colorSecondary {
  color: #f50057;
}
.MuiTypography-colorTextPrimary {
  color: rgba(0, 0, 0, 0.87);
}
.MuiTypography-colorTextSecondary {
  color: rgba(0, 0, 0, 0.54);
}
.MuiTypography-colorError {
  color: #f44336;
}
.MuiTypography-displayInline {
  display: inline;
}
.MuiTypography-displayBlock {
  display: block;
}
</style><style data-jss="" data-meta="MuiSvgIcon">
.MuiSvgIcon-root {
  fill: currentColor;
  width: 1em;
  height: 1em;
  display: inline-block;
  font-size: 1.5rem;
  transition: fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  flex-shrink: 0;
  user-select: none;
}
.MuiSvgIcon-colorPrimary {
  color: #FFFFFF;
}
.MuiSvgIcon-colorSecondary {
  color: #f50057;
}
.MuiSvgIcon-colorAction {
  color: rgba(0, 0, 0, 0.54);
}
.MuiSvgIcon-colorError {
  color: #f44336;
}
.MuiSvgIcon-colorDisabled {
  color: rgba(0, 0, 0, 0.26);
}
.MuiSvgIcon-fontSizeInherit {
  font-size: inherit;
}
.MuiSvgIcon-fontSizeSmall {
  font-size: 1.25rem;
}
.MuiSvgIcon-fontSizeLarge {
  font-size: 2.1875rem;
}
</style><style data-jss="" data-meta="MuiLink">
.MuiLink-underlineNone {
  text-decoration: none;
}
.MuiLink-underlineHover {
  text-decoration: none;
}
.MuiLink-underlineHover:hover {
  text-decoration: underline;
}
.MuiLink-underlineAlways {
  text-decoration: underline;
}
.MuiLink-button {
  border: 0;
  cursor: pointer;
  margin: 0;
  outline: 0;
  padding: 0;
  position: relative;
  user-select: none;
  border-radius: 0;
  vertical-align: middle;
  -moz-appearance: none;
  background-color: transparent;
  -webkit-appearance: none;
  -webkit-tap-highlight-color: transparent;
}
.MuiLink-button::-moz-focus-inner {
  border-style: none;
}
.MuiLink-button.Mui-focusVisible {
  outline: auto;
}
</style><style data-jss="" data-meta="MuiBreadcrumbs">
.MuiBreadcrumbs-ol {
  margin: 0;
  display: flex;
  padding: 0;
  flex-wrap: wrap;
  list-style: none;
  align-items: center;
}
.MuiBreadcrumbs-separator {
  display: flex;
  margin-left: 8px;
  user-select: none;
  margin-right: 8px;
}
</style><style data-jss="" data-meta="makeStyles">
.jss15 {
  width: 100%;
  flex-wrap: wrap;
  max-width: 800px;
  justify-content: center;
}
.jss16 {
  padding: 8px 16px;
  background-color: #FFFFFF;
}
@media (max-width:959.95px) {
  .jss16 {
    padding: 8px;
  }
}
.jss17 > ol {
  flex-wrap: nowrap;
}
.jss17 > ol > li:last-child {
  overflow-y: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
</style><style data-jss="" data-meta="MuiContainer">
.MuiContainer-root {
  width: 100%;
  display: block;
  box-sizing: border-box;
  margin-left: auto;
  margin-right: auto;
  padding-left: 16px;
  padding-right: 16px;
}
@media (min-width:600px) {
  .MuiContainer-root {
    padding-left: 24px;
    padding-right: 24px;
  }
}
.MuiContainer-disableGutters {
  padding-left: 0;
  padding-right: 0;
}
@media (min-width:600px) {
  .MuiContainer-fixed {
    max-width: 600px;
  }
}
@media (min-width:960px) {
  .MuiContainer-fixed {
    max-width: 960px;
  }
}
@media (min-width:1280px) {
  .MuiContainer-fixed {
    max-width: 1280px;
  }
}
@media (min-width:1920px) {
  .MuiContainer-fixed {
    max-width: 1920px;
  }
}
@media (min-width:0px) {
  .MuiContainer-maxWidthXs {
    max-width: 444px;
  }
}
@media (min-width:600px) {
  .MuiContainer-maxWidthSm {
    max-width: 600px;
  }
}
@media (min-width:960px) {
  .MuiContainer-maxWidthMd {
    max-width: 960px;
  }
}
@media (min-width:1280px) {
  .MuiContainer-maxWidthLg {
    max-width: 1280px;
  }
}
@media (min-width:1920px) {
  .MuiContainer-maxWidthXl {
    max-width: 1920px;
  }
}
</style><style data-jss="" data-meta="MuiDivider">
.MuiDivider-root {
  border: none;
  height: 1px;
  margin: 0;
  flex-shrink: 0;
  background-color: rgba(0, 0, 0, 0.12);
}
.MuiDivider-absolute {
  left: 0;
  width: 100%;
  bottom: 0;
  position: absolute;
}
.MuiDivider-inset {
  margin-left: 72px;
}
.MuiDivider-light {
  background-color: rgba(0, 0, 0, 0.08);
}
.MuiDivider-middle {
  margin-left: 16px;
  margin-right: 16px;
}
.MuiDivider-vertical {
  width: 1px;
  height: 100%;
}
.MuiDivider-flexItem {
  height: auto;
  align-self: stretch;
}
</style><style data-jss="" data-meta="MuiCssBaseline">
html {
  box-sizing: border-box;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
*, *::before, *::after {
  box-sizing: inherit;
}
strong, b {
  font-weight: 700;
}
body {
  color: rgba(0, 0, 0, 0.87);
  margin: 0;
  font-size: 0.875rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 1.43;
  letter-spacing: 0.01071em;
  background-color: #F5F5F5;
}
@media print {
  body {
    background-color: #fff;
  }
}
body::backdrop {
  background-color: #F5F5F5;
}
</style><style data-jss="" data-meta="MuiAppBar">
.MuiAppBar-root {
  width: 100%;
  display: flex;
  z-index: 1100;
  box-sizing: border-box;
  flex-shrink: 0;
  flex-direction: column;
}
.MuiAppBar-positionFixed {
  top: 0;
  left: auto;
  right: 0;
  position: fixed;
}
@media print {
  .MuiAppBar-positionFixed {
    position: absolute;
  }
}
.MuiAppBar-positionAbsolute {
  top: 0;
  left: auto;
  right: 0;
  position: absolute;
}
.MuiAppBar-positionSticky {
  top: 0;
  left: auto;
  right: 0;
  position: sticky;
}
.MuiAppBar-positionStatic {
  position: static;
}
.MuiAppBar-positionRelative {
  position: relative;
}
.MuiAppBar-colorDefault {
  color: rgba(0, 0, 0, 0.87);
  background-color: #f5f5f5;
}
.MuiAppBar-colorPrimary {
  color: #000000;
  background-color: #FFFFFF;
}
.MuiAppBar-colorSecondary {
  color: #fff;
  background-color: #f50057;
}
.MuiAppBar-colorInherit {
  color: inherit;
}
.MuiAppBar-colorTransparent {
  color: inherit;
  background-color: transparent;
}
</style><style data-jss="" data-meta="MuiToolbar">
.MuiToolbar-root {
  display: flex;
  position: relative;
  align-items: center;
}
.MuiToolbar-gutters {
  padding-left: 16px;
  padding-right: 16px;
}
@media (min-width:600px) {
  .MuiToolbar-gutters {
    padding-left: 24px;
    padding-right: 24px;
  }
}
.MuiToolbar-regular {
  min-height: 56px;
}
@media (min-width:0px) and (orientation: landscape) {
  .MuiToolbar-regular {
    min-height: 48px;
  }
}
@media (min-width:600px) {
  .MuiToolbar-regular {
    min-height: 64px;
  }
}
.MuiToolbar-dense {
  min-height: 48px;
}
</style><style data-jss="" data-meta="MuiIconButton">
.MuiIconButton-root {
  flex: 0 0 auto;
  color: rgba(0, 0, 0, 0.54);
  padding: 12px;
  overflow: visible;
  font-size: 1.5rem;
  text-align: center;
  transition: background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  border-radius: 50%;
}
.MuiIconButton-root:hover {
  background-color: rgba(0, 0, 0, 0.04);
}
.MuiIconButton-root.Mui-disabled {
  color: rgba(0, 0, 0, 0.26);
  background-color: transparent;
}
@media (hover: none) {
  .MuiIconButton-root:hover {
    background-color: transparent;
  }
}
.MuiIconButton-edgeStart {
  margin-left: -12px;
}
.MuiIconButton-sizeSmall.MuiIconButton-edgeStart {
  margin-left: -3px;
}
.MuiIconButton-edgeEnd {
  margin-right: -12px;
}
.MuiIconButton-sizeSmall.MuiIconButton-edgeEnd {
  margin-right: -3px;
}
.MuiIconButton-colorInherit {
  color: inherit;
}
.MuiIconButton-colorPrimary {
  color: #FFFFFF;
}
.MuiIconButton-colorPrimary:hover {
  background-color: rgba(255, 255, 255, 0.04);
}
@media (hover: none) {
  .MuiIconButton-colorPrimary:hover {
    background-color: transparent;
  }
}
.MuiIconButton-colorSecondary {
  color: #f50057;
}
.MuiIconButton-colorSecondary:hover {
  background-color: rgba(245, 0, 87, 0.04);
}
@media (hover: none) {
  .MuiIconButton-colorSecondary:hover {
    background-color: transparent;
  }
}
.MuiIconButton-sizeSmall {
  padding: 3px;
  font-size: 1.125rem;
}
.MuiIconButton-label {
  width: 100%;
  display: flex;
  align-items: inherit;
  justify-content: inherit;
}
</style><style data-jss="" data-meta="MuiDrawer">
.MuiDrawer-docked {
  flex: 0 0 auto;
}
.MuiDrawer-paper {
  top: 0;
  flex: 1 0 auto;
  height: 100%;
  display: flex;
  outline: 0;
  z-index: 1200;
  position: fixed;
  overflow-y: auto;
  flex-direction: column;
  -webkit-overflow-scrolling: touch;
}
.MuiDrawer-paperAnchorLeft {
  left: 0;
  right: auto;
}
.MuiDrawer-paperAnchorRight {
  left: auto;
  right: 0;
}
.MuiDrawer-paperAnchorTop {
  top: 0;
  left: 0;
  right: 0;
  bottom: auto;
  height: auto;
  max-height: 100%;
}
.MuiDrawer-paperAnchorBottom {
  top: auto;
  left: 0;
  right: 0;
  bottom: 0;
  height: auto;
  max-height: 100%;
}
.MuiDrawer-paperAnchorDockedLeft {
  border-right: 1px solid rgba(0, 0, 0, 0.12);
}
.MuiDrawer-paperAnchorDockedTop {
  border-bottom: 1px solid rgba(0, 0, 0, 0.12);
}
.MuiDrawer-paperAnchorDockedRight {
  border-left: 1px solid rgba(0, 0, 0, 0.12);
}
.MuiDrawer-paperAnchorDockedBottom {
  border-top: 1px solid rgba(0, 0, 0, 0.12);
}
</style><style data-jss="" data-meta="MuiList">
.MuiList-root {
  margin: 0;
  padding: 0;
  position: relative;
  list-style: none;
}
.MuiList-padding {
  padding-top: 8px;
  padding-bottom: 8px;
}
.MuiList-subheader {
  padding-top: 0;
}
</style><style data-jss="" data-meta="MuiListItem">
.MuiListItem-root {
  width: 100%;
  display: flex;
  position: relative;
  box-sizing: border-box;
  text-align: left;
  align-items: center;
  padding-top: 8px;
  padding-bottom: 8px;
  justify-content: flex-start;
  text-decoration: none;
}
.MuiListItem-root.Mui-focusVisible {
  background-color: rgba(0, 0, 0, 0.08);
}
.MuiListItem-root.Mui-selected, .MuiListItem-root.Mui-selected:hover {
  background-color: rgba(0, 0, 0, 0.08);
}
.MuiListItem-root.Mui-disabled {
  opacity: 0.5;
}
.MuiListItem-container {
  position: relative;
}
.MuiListItem-dense {
  padding-top: 4px;
  padding-bottom: 4px;
}
.MuiListItem-alignItemsFlexStart {
  align-items: flex-start;
}
.MuiListItem-divider {
  border-bottom: 1px solid rgba(0, 0, 0, 0.12);
  background-clip: padding-box;
}
.MuiListItem-gutters {
  padding-left: 16px;
  padding-right: 16px;
}
.MuiListItem-button {
  transition: background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
}
.MuiListItem-button:hover {
  text-decoration: none;
  background-color: rgba(0, 0, 0, 0.04);
}
@media (hover: none) {
  .MuiListItem-button:hover {
    background-color: transparent;
  }
}
.MuiListItem-secondaryAction {
  padding-right: 48px;
}
</style><style data-jss="" data-meta="MuiListItemText">
.MuiListItemText-root {
  flex: 1 1 auto;
  min-width: 0;
  margin-top: 4px;
  margin-bottom: 4px;
}
.MuiListItemText-multiline {
  margin-top: 6px;
  margin-bottom: 6px;
}
.MuiListItemText-inset {
  padding-left: 56px;
}
</style><style data-jss="" data-meta="MuiListItemIcon">
.MuiListItemIcon-root {
  color: rgba(0, 0, 0, 0.54);
  display: inline-flex;
  min-width: 56px;
  flex-shrink: 0;
}
.MuiListItemIcon-alignItemsFlexStart {
  margin-top: 8px;
}
</style><style data-jss="" data-meta="MuiFab">
.MuiFab-root {
  color: rgba(0, 0, 0, 0.87);
  width: 56px;
  height: 56px;
  padding: 0;
  font-size: 0.875rem;
  min-width: 0;
  box-shadow: 0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);
  box-sizing: border-box;
  min-height: 36px;
  transition: background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 500;
  line-height: 1.75;
  border-radius: 50%;
  letter-spacing: 0.02857em;
  text-transform: uppercase;
  background-color: #e0e0e0;
}
.MuiFab-root:active {
  box-shadow: 0px 7px 8px -4px rgba(0,0,0,0.2),0px 12px 17px 2px rgba(0,0,0,0.14),0px 5px 22px 4px rgba(0,0,0,0.12);
}
.MuiFab-root:hover {
  text-decoration: none;
  background-color: #d5d5d5;
}
.MuiFab-root.Mui-focusVisible {
  box-shadow: 0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);
}
.MuiFab-root.Mui-disabled {
  color: rgba(0, 0, 0, 0.26);
  box-shadow: none;
  background-color: rgba(0, 0, 0, 0.12);
}
@media (hover: none) {
  .MuiFab-root:hover {
    background-color: #e0e0e0;
  }
}
.MuiFab-root:hover.Mui-disabled {
  background-color: rgba(0, 0, 0, 0.12);
}
.MuiFab-label {
  width: 100%;
  display: inherit;
  align-items: inherit;
  justify-content: inherit;
}
.MuiFab-primary {
  color: #000000;
  background-color: #FFFFFF;
}
.MuiFab-primary:hover {
  background-color: #C2C2C2;
}
@media (hover: none) {
  .MuiFab-primary:hover {
    background-color: #FFFFFF;
  }
}
.MuiFab-secondary {
  color: #fff;
  background-color: #f50057;
}
.MuiFab-secondary:hover {
  background-color: #c51162;
}
@media (hover: none) {
  .MuiFab-secondary:hover {
    background-color: #f50057;
  }
}
.MuiFab-extended {
  width: auto;
  height: 48px;
  padding: 0 16px;
  min-width: 48px;
  min-height: auto;
  border-radius: 24px;
}
.MuiFab-extended.MuiFab-sizeSmall {
  width: auto;
  height: 34px;
  padding: 0 8px;
  min-width: 34px;
  border-radius: 17px;
}
.MuiFab-extended.MuiFab-sizeMedium {
  width: auto;
  height: 40px;
  padding: 0 16px;
  min-width: 40px;
  border-radius: 20px;
}
.MuiFab-colorInherit {
  color: inherit;
}
.MuiFab-sizeSmall {
  width: 40px;
  height: 40px;
}
.MuiFab-sizeMedium {
  width: 48px;
  height: 48px;
}
</style><style data-jss="" data-meta="makeStyles">
.jss1 {
  display: flex;
}
.jss2 {
  transition: margin 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms,width 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms;
}
.jss3 {
  width: calc(100% - 240px);
  transition: margin 225ms cubic-bezier(0.0, 0, 0.2, 1) 0ms,width 225ms cubic-bezier(0.0, 0, 0.2, 1) 0ms;
  margin-left: 240px;
}
.jss4 {
  margin-right: 16px;
}
.jss5 {
  display: none;
}
.jss6 {
  width: 240px;
  flex-shrink: 0;
}
.jss7 {
  width: 240px;
}
.jss8 {
  display: flex;
  padding: 0px 8px;
  min-height: 56px;
  align-items: center;
  justify-content: flex-end;
}
@media (min-width:0px) and (orientation: landscape) {
  .jss8 {
    min-height: 48px;
  }
}
@media (min-width:600px) {
  .jss8 {
    min-height: 64px;
  }
}
.jss9 {
  flex-grow: 1;
  max-width: 100%;
  min-height: 100vh;
  transition: margin 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms;
  margin-left: -240px;
  background-color: #FFFFFF;
}
.jss10 {
  max-width: 100%;
  min-height: 100vh;
  transition: margin 225ms cubic-bezier(0.0, 0, 0.2, 1) 0ms;
  margin-left: 0;
  background-color: #FFFFFF;
}
.jss11 {
  right: 16px;
  bottom: 16px;
  position: fixed;
}
</style><style data-jss="" data-meta="MuiChip">
.MuiChip-root {
  color: rgba(0, 0, 0, 0.87);
  border: none;
  cursor: default;
  height: 32px;
  display: inline-flex;
  outline: 0;
  padding: 0;
  font-size: 0.8125rem;
  box-sizing: border-box;
  transition: background-color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  align-items: center;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  white-space: nowrap;
  border-radius: 16px;
  vertical-align: middle;
  justify-content: center;
  text-decoration: none;
  background-color: #e0e0e0;
}
.MuiChip-root.Mui-disabled {
  opacity: 0.5;
  pointer-events: none;
}
.MuiChip-root .MuiChip-avatar {
  color: #616161;
  width: 24px;
  height: 24px;
  font-size: 0.75rem;
  margin-left: 5px;
  margin-right: -6px;
}
.MuiChip-root .MuiChip-avatarColorPrimary {
  color: #000000;
  background-color: #C2C2C2;
}
.MuiChip-root .MuiChip-avatarColorSecondary {
  color: #fff;
  background-color: #c51162;
}
.MuiChip-root .MuiChip-avatarSmall {
  width: 18px;
  height: 18px;
  font-size: 0.625rem;
  margin-left: 4px;
  margin-right: -4px;
}
.MuiChip-sizeSmall {
  height: 24px;
}
.MuiChip-colorPrimary {
  color: #000000;
  background-color: #FFFFFF;
}
.MuiChip-colorSecondary {
  color: #fff;
  background-color: #f50057;
}
.MuiChip-clickable {
  cursor: pointer;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}
.MuiChip-clickable:hover, .MuiChip-clickable:focus {
  background-color: rgb(206, 206, 206);
}
.MuiChip-clickable:active {
  box-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);
}
.MuiChip-clickableColorPrimary:hover, .MuiChip-clickableColorPrimary:focus {
  background-color: rgb(234, 234, 234);
}
.MuiChip-clickableColorSecondary:hover, .MuiChip-clickableColorSecondary:focus {
  background-color: rgb(245, 20, 100);
}
.MuiChip-deletable:focus {
  background-color: rgb(206, 206, 206);
}
.MuiChip-deletableColorPrimary:focus {
  background-color: rgb(204, 204, 204);
}
.MuiChip-deletableColorSecondary:focus {
  background-color: rgb(247, 51, 120);
}
.MuiChip-outlined {
  border: 1px solid rgba(0, 0, 0, 0.23);
  background-color: transparent;
}
.MuiChip-clickable.MuiChip-outlined:hover, .MuiChip-clickable.MuiChip-outlined:focus, .MuiChip-deletable.MuiChip-outlined:focus {
  background-color: rgba(0, 0, 0, 0.04);
}
.MuiChip-outlined .MuiChip-avatar {
  margin-left: 4px;
}
.MuiChip-outlined .MuiChip-avatarSmall {
  margin-left: 2px;
}
.MuiChip-outlined .MuiChip-icon {
  margin-left: 4px;
}
.MuiChip-outlined .MuiChip-iconSmall {
  margin-left: 2px;
}
.MuiChip-outlined .MuiChip-deleteIcon {
  margin-right: 5px;
}
.MuiChip-outlined .MuiChip-deleteIconSmall {
  margin-right: 3px;
}
.MuiChip-outlinedPrimary {
  color: #FFFFFF;
  border: 1px solid #FFFFFF;
}
.MuiChip-clickable.MuiChip-outlinedPrimary:hover, .MuiChip-clickable.MuiChip-outlinedPrimary:focus, .MuiChip-deletable.MuiChip-outlinedPrimary:focus {
  background-color: rgba(255, 255, 255, 0.04);
}
.MuiChip-outlinedSecondary {
  color: #f50057;
  border: 1px solid #f50057;
}
.MuiChip-clickable.MuiChip-outlinedSecondary:hover, .MuiChip-clickable.MuiChip-outlinedSecondary:focus, .MuiChip-deletable.MuiChip-outlinedSecondary:focus {
  background-color: rgba(245, 0, 87, 0.04);
}
.MuiChip-icon {
  color: #616161;
  margin-left: 5px;
  margin-right: -6px;
}
.MuiChip-iconSmall {
  width: 18px;
  height: 18px;
  margin-left: 4px;
  margin-right: -4px;
}
.MuiChip-iconColorPrimary {
  color: inherit;
}
.MuiChip-iconColorSecondary {
  color: inherit;
}
.MuiChip-label {
  overflow: hidden;
  white-space: nowrap;
  padding-left: 12px;
  padding-right: 12px;
  text-overflow: ellipsis;
}
.MuiChip-labelSmall {
  padding-left: 8px;
  padding-right: 8px;
}
.MuiChip-deleteIcon {
  color: rgba(0, 0, 0, 0.26);
  width: 22px;
  cursor: pointer;
  height: 22px;
  margin: 0 5px 0 -6px;
  -webkit-tap-highlight-color: transparent;
}
.MuiChip-deleteIcon:hover {
  color: rgba(0, 0, 0, 0.4);
}
.MuiChip-deleteIconSmall {
  width: 16px;
  height: 16px;
  margin-left: -4px;
  margin-right: 4px;
}
.MuiChip-deleteIconColorPrimary {
  color: rgba(0, 0, 0, 0.7);
}
.MuiChip-deleteIconColorPrimary:hover, .MuiChip-deleteIconColorPrimary:active {
  color: #000000;
}
.MuiChip-deleteIconColorSecondary {
  color: rgba(255, 255, 255, 0.7);
}
.MuiChip-deleteIconColorSecondary:hover, .MuiChip-deleteIconColorSecondary:active {
  color: #fff;
}
.MuiChip-deleteIconOutlinedColorPrimary {
  color: rgba(255, 255, 255, 0.7);
}
.MuiChip-deleteIconOutlinedColorPrimary:hover, .MuiChip-deleteIconOutlinedColorPrimary:active {
  color: #FFFFFF;
}
.MuiChip-deleteIconOutlinedColorSecondary {
  color: rgba(245, 0, 87, 0.7);
}
.MuiChip-deleteIconOutlinedColorSecondary:hover, .MuiChip-deleteIconOutlinedColorSecondary:active {
  color: #f50057;
}
</style><style data-jss="" data-meta="makeStyles">
.jss28 {
  margin: 8px 4px;
}
</style><style data-jss="" data-meta="makeStyles">
.jss27 {
  height: 30px;
  margin: 8px 4px;
}
</style><style data-jss="" data-meta="makeStyles">
.jss18 {
  width: 100%;
  margin: 0;
  padding: 0px 16px;
  max-width: 800px;
}
@media (max-width:959.95px) {
  .jss18 {
    padding: 8px;
  }
}
.jss19 {
  width: 100%;
  max-width: 100%;
}
.jss20 {
  margin-top: 16px;
}
</style><style data-jss="" data-meta="makeStyles">
.jss21 {
  order: 2;
  width: 240px;
  display: none;
  padding: 8px;
  position: fixed;
  overflow-x: hidden;
  overflow-y: auto;
  flex-shrink: 0;
  overflow-wrap: break-word;
  list-style-type: none;
}
@media (min-width:960px) {
  .jss21 {
    display: block;
  }
}
.jss22 {
  margin-top: 16px;
  padding-left: 12px;
}
.jss23 {
  padding: 8px 0px 4px 8px;
  font-size: 14px;
  box-sizing: content-box;
}
.jss24 {
  margin: 0;
  padding: 0;
  list-style-type: none;
}
.jss25 {
  padding: 4px 0px 4px 8px;
  font-size: 13px;
  box-sizing: content-box;
  border-left: 4px solid transparent;
}
.jss25:hover {
  cursor: pointer;
  border-left: 4px solid #eeeeee;
}
.jss25.jss26, .jss25:active {
  border-left: 4px solid #bdbdbd;
}
</style><style data-jss="" data-meta="makeStyles">
.jss12 {
  display: flex;
  overflow: hidden;
  flex-wrap: wrap;
  padding-top: 8px;
  justify-content: space-around;
  background-color: #FFFFFF;
}
@media (max-width:959.95px) {
  .jss12 {
    padding: 8px;
  }
}
.jss13 {
  display: flex;
  overflow: hidden;
  flex-wrap: wrap;
  justify-content: flex-end;
  background-color: #FFFFFF;
}
@media (min-width:960px) {
  .jss13 {
    width: 240px;
  }
}
.jss14 {
  margin: 0;
  padding: 0;
}
@media (max-width:959.95px) {
  .jss14 {
    display: flex;
    overflow: hidden;
    flex-wrap: wrap;
  }
}
</style><link rel="stylesheet" type="text/css" href="/static/css/detail.eef0a95b21d980f3da6b.css"><script charset="utf-8" src="/static/js/detail.eef0a95b21d980f3da6b.js"></script><meta name="google-site-verification" content="s3PYm0fCo0ImPqqXoPLiUb_bFdlYODKw54VGSkcFgyE" data-react-helmet="true"><meta id="google-analytics" name="google-analytics" content="UA-68904127-2" data-react-helmet="true"><meta name="og:site_name" content="zexo.dev" data-react-helmet="true"><meta name="og:type" content="website" data-react-helmet="true"><meta name="og:title" itemprop="name" content="Monorepo Practice in TypeScript Projects" data-react-helmet="true"><meta name="og:description" itemprop="description" content="随着 Node 生态社区的发展，越来越多的 Nodejs 代码仓库开始采用 Monorepo 的形式进行管理。我们可以看到一些前端 UI 框架、Web 框架，在新版本/一开始就采用了 monorepo 的形式管理代码。Q: 什么是 Monorepo? Monorepo 的基本好处是什么? A: 这里不多阐述，可以参考知乎上的这篇文章: https://zhuanlan.zhihu.com/p/31289463
" data-react-helmet="true"><meta name="og:image" itemprop="image" content="https:/zexo.dev/posts/2019/11/14/monorepo-practice-in-typescript-projects/cover.png" data-react-helmet="true"><meta name="og:type" content="article" data-react-helmet="true"><meta name="description" itemprop="description" content="随着 Node 生态社区的发展，越来越多的 Nodejs 代码仓库开始采用 Monorepo 的形式进行管理。我们可以看到一些前端 UI 框架、Web 框架，在新版本/一开始就采用了 monorepo 的形式管理代码。Q: 什么是 Monorepo? Monorepo 的基本好处是什么? A: 这里不多阐述，可以参考知乎上的这篇文章: https://zhuanlan.zhihu.com/p/31289463
" data-react-helmet="true"><script type="application/ld+json" data-react-helmet="true">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://zexo.dev","name":"Home","position":1},{"@type":"ListItem","item":"https://zexo.dev/posts","name":"Posts","position":2},{"@type":"ListItem","item":"https://zexo.dev/posts/2019/11/14/monorepo-practice-in-typescript-projects","name":"Monorepo Practice in TypeScript Projects","position":3}]}</script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TS7Z4BQ" height="0" width="0" style="display: none; visibility: hidden;"></iframe></noscript><div id="app"><div class="jss1"><header class="MuiPaper-root MuiAppBar-root MuiAppBar-positionFixed MuiAppBar-colorPrimary jss2 mui-fixed MuiPaper-elevation4"><div class="MuiToolbar-root MuiToolbar-regular MuiToolbar-gutters"><button class="MuiButtonBase-root MuiIconButton-root jss4 MuiIconButton-colorInherit MuiIconButton-edgeStart" tabindex="0" type="button" aria-label="open drawer"><span class="MuiIconButton-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></span><span class="MuiTouchRipple-root"></span></button><h6 class="MuiTypography-root MuiTypography-h6 MuiTypography-noWrap">zexo.dev</h6></div></header><div class="MuiDrawer-root MuiDrawer-docked jss6"><div class="MuiPaper-root MuiDrawer-paper jss7 MuiDrawer-paperAnchorLeft MuiDrawer-paperAnchorDockedLeft MuiPaper-elevation0" style="visibility: hidden; transform: translateX(-240px);"><div class="jss8"><button class="MuiButtonBase-root MuiIconButton-root" tabindex="0" type="button"><span class="MuiIconButton-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></svg></span><span class="MuiTouchRipple-root"></span></button></div><hr class="MuiDivider-root"><ul class="MuiList-root MuiList-padding"><a class="MuiButtonBase-root MuiListItem-root MuiListItem-gutters MuiListItem-button" tabindex="0" role="button" aria-disabled="false" href="/"><div class="MuiListItemIcon-root"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg></div><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">Home</span></div><span class="MuiTouchRipple-root"></span></a><a class="MuiButtonBase-root MuiListItem-root MuiListItem-gutters MuiListItem-button" tabindex="0" role="button" aria-disabled="false" href="/categories"><div class="MuiListItemIcon-root"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2l-5.5 9h11z"></path><circle cx="17.5" cy="17.5" r="4.5"></circle><path d="M3 13.5h8v8H3z"></path></svg></div><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">Categories</span></div><span class="MuiTouchRipple-root"></span></a><a class="MuiButtonBase-root MuiListItem-root MuiListItem-gutters MuiListItem-button" tabindex="0" role="button" aria-disabled="false" href="/tags"><div class="MuiListItemIcon-root"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z"></path></svg></div><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">Tags</span></div><span class="MuiTouchRipple-root"></span></a><a class="MuiButtonBase-root MuiListItem-root MuiListItem-gutters MuiListItem-button" tabindex="0" role="button" aria-disabled="false" href="/pages/about"><div class="MuiListItemIcon-root"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></div><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">About Me</span></div><span class="MuiTouchRipple-root"></span></a><a class="MuiButtonBase-root MuiListItem-root MuiListItem-gutters MuiListItem-button" tabindex="0" role="button" aria-disabled="false" href="/pages/projects"><div class="MuiListItemIcon-root"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></div><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">Projects</span></div><span class="MuiTouchRipple-root"></span></a></ul></div></div><main class="jss9"><div class="MuiToolbar-root MuiToolbar-regular jss8 MuiToolbar-gutters" id="back-to-top-anchor"></div><div class="MuiContainer-root jss12 MuiContainer-maxWidthLg"><div class="jss14"><div class="jss15"><div class="MuiPaper-root jss16 MuiPaper-elevation0 MuiPaper-rounded"><nav class="MuiTypography-root MuiBreadcrumbs-root jss17 MuiTypography-body1 MuiTypography-colorTextSecondary" aria-label="breadcrumb"><ol class="MuiBreadcrumbs-ol"><li class="MuiBreadcrumbs-li"><a class="MuiTypography-root MuiLink-root MuiLink-underlineHover MuiTypography-colorInherit" href="/">Home</a></li><li aria-hidden="true" class="MuiBreadcrumbs-separator"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></li><li class="MuiBreadcrumbs-li"><a class="MuiTypography-root MuiLink-root MuiLink-underlineHover MuiTypography-colorInherit" href="/posts">Posts</a></li><li aria-hidden="true" class="MuiBreadcrumbs-separator"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></li><li class="MuiBreadcrumbs-li"><a class="MuiTypography-root MuiLink-root MuiLink-underlineHover MuiTypography-colorTextPrimary" href="/posts/2019/11/14/monorepo-practice-in-typescript-projects">Monorepo Practice in TypeScript Projects</a></li></ol></nav></div></div><div class="jss18"><picture><source type="image/webp" data-was-processed="false"><img class="jss19 lazy loaded" data-ll-status="loaded" alt="Monorepo Practice in TypeScript Projects" src="/posts/2019/11/14/monorepo-practice-in-typescript-projects/cover.png"></picture><div class="MuiTypography-root markdown-body MuiTypography-body1"><h1 id="monorepo-practice-in-typescript-projects">Monorepo Practice in TypeScript Projects</h1>
<h2 id="background">Background</h2>
<p>随着 Node 生态社区的发展，越来越多的 Nodejs 代码仓库开始采用 Monorepo 的形式进行管理。</p>
<p>我们可以看到一些前端 UI 框架、Web 框架，在新版本/一开始就采用了 monorepo 的形式管理代码。</p>
<blockquote>
<p>Q: 什么是 Monorepo? Monorepo 的基本好处是什么? A: 这里不多阐述，可以参考知乎上的这篇文章: <a href="https://zhuanlan.zhihu.com/p/31289463">https://zhuanlan.zhihu.com/p/31289463</a></p>
</blockquote>
<p>由于在其他(这里值一些较较成熟的语言，如 Java)语言的包管理生态圈里已有很多成熟的解决方案，如 Java 世界里的 Maven/Gradle , 其中都有很多较佳时间在各种成熟的开源项目中有所体现。</p>
<p>由于 Node 官方的 NPM Package Registry 并没有提供一个官方的解决方案，所以目前会有很多的实现方案，比如 <code>Lerna</code> , <code>Yarn Workspace</code> , 更甚者还有一些脚本替换发布方案。</p>
<p>近期我在好几个 Node with TypeScript 项目(不管是工作中的项目抑或是自己的项目)中，都尝试开始使用 MonoRepo 的形式去组织代码结构与 CICD 流程。这里分享下对 Nodejs + TypeScript 的一些实践经验。</p>
<h3 id="problems">Problems</h3>
<p>要使用 Multi-Repo 还是 Monorepo，又或者是如何从 Multi-Repo 迁移、进化成 Monorepo，不同项目都面对着不同的问题。</p>
<p>我抽取了我在这些 Node 项目在修改成 Monorepo 的过程中面对的一些问题，并在下文中给出目前我觉得较为合理的一些解决方案。</p>
<h3 id="unit-testing">Unit Testing</h3>
<p>常规的 Multi-Repo 的单元测试流程理解起来会比较简单。以常见的 <code>jest</code> 来看，为单个 Repo 设立单元测试、为单个 Repo 关联代码覆盖率相关的 CI 配置/平台，都相当简单。</p>
<p>当执行 Jest 进行单元测试的时候，我们只用维护一份 Jest 配置。接着一切便按照 Jest 的配置正常运作:</p>
<ul>
<li>代码覆盖率相关的 CI 读取 Jest 配置中执行的 <code>coverageDirectory</code> 下相关的覆盖率报告文件</li>
<li>需要在 Jest 执行的各种生命周期的 Hooks 都能通过配置一目了然</li>
</ul>
<p>当我们把这些 Multi-Repo 集中到一起的时候，问题便显现出来：</p>
<ul>
<li>运行测试是逐个 sub-packages 单独执行测试吗? 如 <code>lerna run test</code></li>
<li>单元测试的配置应该如何维护? 维护在 Monorepo 的根目录还是单独拆分维护在每个 sub-package 下?</li>
<li>如何像 Multi-Repo 那样与测试覆盖率的 CI 集合起来?</li>
</ul>
<h3 id="with-path-alias">With Path Alias</h3>
<p>现代化的 Node 项目(不管是 Node 还是前端项目)，很多时候都有一些 Path-Alias 的技巧。</p>
<p>具体表现是什么呢? 比如利用 <code>webpack</code> 的 <code>path.resolve</code> 配置或者 <code>tsconfig</code> 中 <code>paths</code> 的配置，做一些路径的简化，以节省各种相对路径 <code>../..</code> 的使用。</p>
<p>如 <code>@/main.ts</code> 实际指向了以项目根目录开始的 <code>&lt;rootDir&gt;/src/main.ts</code></p>
<p>但是，在 Monorepo 下，我们在想方便的以 <code>@</code> 作为 Path Alias，则会遇到很多思考上的问题。</p>
<p>在单个 sub-package 内 理解并执行 Path-Alias 会跟原先的方式没什么区别。但是需要 root package</p>
<p>也理解 sub-package 的 Path-Alias 配置则需要很多思考：</p>
<ul>
<li>多个使用 相同 Path-Alias 的 sub-packages 之间应该如何解析? 大家都在使用相同的 <code>@</code> 作为引用路径别名的情况下，怎么知道此时的 <code>@</code> 是对应哪一个正确的绝对路径呢</li>
<li>在 Monorepo 的情况下，还该不该使用 Path-Alias</li>
</ul>
<p>相信这些问题，都将是大家在实践中会遇到的一些问题</p>
<h2 id="example-project">Example Project</h2>
<p>下面以我的博客 repo v6.0 使用 TypeScript 和 monorepo 形式开发过程中的一些实践。</p>
<p>将会以比较简短的篇幅描述项目 Monorepo 相关的目录结构与相关的配置、配置要点，并描述如何/使用哪种方案去解决以上提及的问题。</p>
<h3 id="example-project-introduction">Example Project Introduction</h3>
<p>整个项目源代码形式都以 TypeScript 作为主要语言，项目使用 Monorepo 进行一些子库之间的依赖管理。</p>
<p>其中使用 Lerna 进行 Monorepo 管理的主要工具，使用 Jest 作为贯穿所有子项目的单元测试框架。</p>
<p>整类子项目大概可以分成以下几种类型：</p>
<pre class="hljs"><code>packages
├── api-generator      // 工具库 - 根据路由元数据生成 JSON 结构的 API 相应内容
├── application        // 核心构建流程，讲所有工具库和主题通过一定的构建流程串联在一起
├── article-tools      // 工具库 - 将 .md 文件结合Markdown工具库转换成文章数据
├── common             // 公共接口声明
├── config             // 工具库 - 博客项目的配置发现与读取类库
├── markdown           // 工具库 - 基于 Markdown-it 编写的各种扩展与插件
├── migration          // 临时脚本 - 将上一版本的博客应用数据结构迁移的脚本集
├── pwa-tools          // 工具库 - 基于 Workbox 生成 PWA 相关资源
├── routes-tools       // 工具库 - 生成静态路由极其 Meta 信息
├── theme-react        // 基于 React + Material UI 的前端主题
└── theme-vue          // 基于 Vue + vuematerial 的前端主题
</code></pre>
<p>按照互相之间的依赖路径，会是以下这样一种依赖形式: (可以通过 <code>lerna ls --graph --all</code> 命令查看 )</p>
<pre class="hljs"><code>{
  "@blog/api-generator": [
    "@blog/article-tools",
    "@blog/common",
    "@blog/routes-tools"
  ],
  "@blog/application": [
    "@blog/api-generator",
    "@blog/article-tools",
    "@blog/common",
    "@blog/config"
  ],
  "@blog/article-tools": [
    "@blog/common",
    "@blog/markdown"
  ],
  "@blog/common": [
  ],
  "@blog/config": [
  ],
  "@blog/markdown": [
    "@blog/common"
  ],
  "@blog/migration": [
    "@blog/article-tools",
    "@blog/markdown"
  ],
  "@blog/pwa-tools": [
    "@blog/common"
  ],
  "@blog/routes-tools": [
    "@blog/article-tools",
    "@blog/common",
    "@blog/config"
  ],
  "@blog/theme-react": [
    "@blog/common",
    "@blog/config"
  ],
  "@blog/theme-vue": [
    "@blog/common",
    "@blog/config",
    "@blog/routes-tools"
  ]
}
</code></pre>
<h3 id="example-project-folder-structure">Example Project Folder Structure</h3>
<p>现在我们来看整个项目的结构，以及其特点 (为节省面板，省略部分结构相同的工具类库目录)</p>
<pre class="hljs"><code>├── CHANGELOG.md
├── LICENSE
├── README.md
├── data
├── lerna.json
├── package.json
├── packages
│&nbsp;&nbsp; ├── api-generator
│&nbsp;&nbsp; ├── application
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── README.md
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── dist
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── nest-cli.json
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── package.json
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── src
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── tsconfig.build.json
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── tsconfig.json
│&nbsp;&nbsp; ├── article-tools
│&nbsp;&nbsp; ├── common
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── README.md
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── constants
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── interfaces
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── package.json
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── tsconfig.json
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── utils
│&nbsp;&nbsp; │&nbsp;&nbsp; └── yarn.lock
│&nbsp;&nbsp; ├── config
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── README.md
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── dist
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── package.json
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── src
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── tsconfig.json
│&nbsp;&nbsp; │&nbsp;&nbsp; └── yarn.lock
│&nbsp;&nbsp; ├── markdown
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── README.md
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── dist
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── package.json
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── src
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── tsconfig.json
│&nbsp;&nbsp; │&nbsp;&nbsp; └── yarn.lock
│&nbsp;&nbsp; ├── migration
│&nbsp;&nbsp; ├── pwa-tools
│&nbsp;&nbsp; ├── routes-tools
│&nbsp;&nbsp; ├── theme-react
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── dist
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── gulpfile.ts
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── package.json
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── src
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── tsconfig.json
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── tsconfig.webpack.json
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── webpack
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── yarn-error.log
│&nbsp;&nbsp; │&nbsp;&nbsp; └── yarn.lock
│&nbsp;&nbsp; └── theme-vue
│&nbsp;&nbsp;     ├── README.md
│&nbsp;&nbsp;     ├── dist
│&nbsp;&nbsp;     ├── package.json
│&nbsp;&nbsp;     ├── public
│&nbsp;&nbsp;     ├── src
│&nbsp;&nbsp;     ├── tsconfig.json
│&nbsp;&nbsp;     ├── vue.config.js
│&nbsp;&nbsp;     ├── vue.config.ts
│&nbsp;&nbsp;     ├── webpack.config.js
│&nbsp;&nbsp;     └── yarn.lock
</code></pre>
<p>可以看到，中间标记为工具库一类的类库，都有 <code>dist</code> 和 <code>src</code> 目录，作为以 TypeScript 为源代码的语言，我给他们人为地设定了基本的 <code>TypeScript</code> + <code>Lib</code> 的构建路径，所以在单个项目接口来看，他们都具有通用的 <code>tsconfig.json</code> 和 jest 使用的 <code>jest.config</code> (in package.json).</p>
<p><strong>tsconfig.json</strong></p>
<pre class="hljs"><code>{
  <span class="hljs-attr">"compilerOptions"</span>: {
    <span class="hljs-attr">"module"</span>: <span class="hljs-string">"commonjs"</span>,
    <span class="hljs-attr">"declaration"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"removeComments"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"emitDecoratorMetadata"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"experimentalDecorators"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"resolveJsonModule"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"target"</span>: <span class="hljs-string">"es6"</span>,
    <span class="hljs-attr">"sourceMap"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"outDir"</span>: <span class="hljs-string">"./dist"</span>,
    <span class="hljs-attr">"baseUrl"</span>: <span class="hljs-string">"./"</span>,
    <span class="hljs-attr">"incremental"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"noImplicitAny"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"typeRoots"</span>: [<span class="hljs-string">"./node_modules/@types"</span>]
  },
  <span class="hljs-attr">"exclude"</span>: [<span class="hljs-string">"node_modules"</span>, <span class="hljs-string">"dist"</span>, <span class="hljs-string">"reports"</span>, <span class="hljs-string">"**/*.test.ts"</span>]
}
</code></pre>
<p><strong>jest.config</strong></p>
<pre class="hljs"><code>{
  <span class="hljs-attr">"jest"</span>: {
    <span class="hljs-attr">"moduleFileExtensions"</span>: [<span class="hljs-string">"ts"</span>, <span class="hljs-string">"js"</span>, <span class="hljs-string">"json"</span>],
    <span class="hljs-attr">"transform"</span>: {
      <span class="hljs-attr">"^.+\\.ts$"</span>: <span class="hljs-string">"ts-jest"</span>,
      <span class="hljs-attr">"^.*\\.md$"</span>: <span class="hljs-string">"jest-raw-loader"</span>
    },
    <span class="hljs-attr">"collectCoverageFrom"</span>: [<span class="hljs-string">"!**/__tests__/**"</span>, <span class="hljs-string">"&lt;rootDir&gt;/src/**/*.ts"</span>],
    <span class="hljs-attr">"testMatch"</span>: [<span class="hljs-string">"&lt;rootDir&gt;/src/**/*.test.ts"</span>],
    <span class="hljs-attr">"testEnvironment"</span>: <span class="hljs-string">"node"</span>,
    <span class="hljs-attr">"coverageDirectory"</span>: <span class="hljs-string">"&lt;rootDir&gt;/coverage"</span>
  }
}
</code></pre>
<p>对于单一一个类库，必定有着两步 npm script: build, test:</p>
<ul>
<li>npm run build 将执行命令 tsc，根据 tsconfig.json 的配置，将 <code>src</code> 目录下的 ts 文件转译成 <code>dist</code> 目录下的 commonjs 文件。</li>
<li>npm run test 将执行命令 jest，根据 jest 的配置， 读取 <code>"&lt;rootDir&gt;/src/**/*.test.ts"</code> unix path glob pattern 匹配的测试文件执行单元测试。</li>
</ul>
<h2 id="solutions">Solutions</h2>
<p>言归正传，我们回去之前引出的 &nbsp;Monorepo 在实践中诞生的第一个问题</p>
<ul>
<li>UnitTesting cross Monorepo</li>
</ul>
<p>不过我们可以由浅入深，先来看看这些由纯工具类库构造成的 Monorepo 如何执行单元测试，再进化到遇到其他乱七八糟复杂的复杂情况时，应当如何应对。</p>
<h3 id="unittesting-cross-monorepo">UnitTesting cross Monorepo</h3>
<p>由于我们可以直接在每个工具类库下单独执行 <code>npm run test</code> 来分别执行单元测试，那么则可以在项目根目录下通过 <code>lerna run test</code> 执行。</p>
<p>啊哈！思考往往没有这么简单。我们执行单元测试的过程，不仅仅是为了为了分批执行多个子项目的单元测试，判断中间是否有非 0 退出的错误案例，用以快速反馈本次 commit 是否可能造成了破坏性的后果。还能结合很多测试结果相关的 CI 工具，反馈单元测试覆盖率等关键指标。</p>
<p>在开源界免费、支持度比较好覆盖率分析平台，不得不说 <a href="https://codecov.io/">Codecov</a> 。基本上在尝试过所有类似的、免费的覆盖率报告分析平台后，最后都选择迁移到 Codecov 上。</p>
<p>那这里引发的关键思考点是: 我们分别在每个子项目下分别执行 <code>npm run test</code> ，根据各个子项目的 jestconfig, 将会在不同的子项目目录下生成覆盖率报告 (这里特指 jest 生成的 linux 标准的 <code>[lcov.info](http://lcov.info)</code> ) 文件。那么我们的 codecov 有办法汇总多个不同的 lcov.info 文件并为 Monorepo 的单个大项目仓库生成一份覆盖率报告吗 ?</p>
<p>我至今还没为这种思路找到经典、合理的解决方案。</p>
<p>如果在 Monorepo 的根目录里执行 <code>jest</code> ，接着为整个项目生成一份覆盖率报告，这样来说是不是比较方便的解决这个问题呢?</p>
<p>由于我们的工具类子仓库大部分都含有相同的目录结构，比如单元测试文件都可以用固定的 glob 表达式进行匹配，因而我们可以在项目根目录里安装 <code>typescript</code> 和 <code>jest</code> 相关依赖，然后自上而下的查找 sub-packages 中的测试文件执行测试，使得我们可以通过在不同的路径执行 <code>jest</code> 而达到不同的效果:</p>
<ul>
<li>在根目录下执行 jest，可以一次执行所有 sub-packages 的测试，并在根目录指定的文件夹下生成覆盖率报告</li>
<li>在单个 sub-package 下执行 jest，可以快速的执行单个 sub-packages 下的测试，执行效率高，且能适配大多数 IDE、Editor 的单元测试执行上下文自动发现</li>
</ul>
<p>所以这里的解决方案的前置要求便是:</p>
<ul>
<li>每个 sub-package 具有类似的、统一的测试路径结构风格</li>
<li>每个 sub-package 使用到的 jest extension 不允许存在互斥的情况</li>
<li>根目录的 jest 配置是所有 sub-packages 的并集</li>
</ul>
<p>到了这里，我们可以看一下在这种解决方案下的更目录的 jestconfig:</p>
<p>其中关键的节点是 <code>testMatch</code> 与 <code>collectCoverageFrom</code> 下的字段，用 <code>&lt;rootDir&gt;/packages/**/src/**/*</code> 去匹配所有 sub-packages 下的源代码与测试代码。</p>
<pre class="hljs"><code>{
  <span class="hljs-attr">"jest"</span>: {
    <span class="hljs-attr">"moduleFileExtensions"</span>: [<span class="hljs-string">"ts"</span>, <span class="hljs-string">"js"</span>, <span class="hljs-string">"json"</span>],
    <span class="hljs-attr">"transform"</span>: {
      <span class="hljs-attr">"^.+\\.ts$"</span>: <span class="hljs-string">"ts-jest"</span>,
      <span class="hljs-attr">"^.*\\.md$"</span>: <span class="hljs-string">"jest-raw-loader"</span>
    },
    <span class="hljs-attr">"collectCoverageFrom"</span>: [
      <span class="hljs-string">"!**/__tests__/**"</span>,
      <span class="hljs-string">"!**/src/index.ts"</span>,
      <span class="hljs-string">"!**/src/main.ts"</span>,
      <span class="hljs-string">"!**/src/plugins.ts"</span>,
      <span class="hljs-string">"!**/*.module.ts"</span>,
      <span class="hljs-string">"!**/migration.ts"</span>,
      <span class="hljs-string">"&lt;rootDir&gt;/src/**/*.ts"</span>,
      <span class="hljs-string">"&lt;rootDir&gt;/packages/**/src/**/*.ts"</span>
    ],
    <span class="hljs-attr">"testMatch"</span>: [<span class="hljs-string">"&lt;rootDir&gt;/src/**/*.test.ts"</span>, <span class="hljs-string">"&lt;rootDir&gt;/packages/**/src/**/*.test.ts"</span>],
    <span class="hljs-attr">"testEnvironment"</span>: <span class="hljs-string">"node"</span>,
    <span class="hljs-attr">"coverageDirectory"</span>: <span class="hljs-string">"&lt;rootDir&gt;/coverage"</span>
  }
}
</code></pre>
<p>如此一来，我们便解决了基本的问题。</p>
<p>下面我们来看糅合了实际工作中一些复杂的情况：整合带 Path Alias 的子项目。</p>
<h3 id="path-alias">Path Alias</h3>
<p>这里将会以博客项目中的 <code>application</code> 子项目作为讲解。</p>
<p><code>application</code> 子项目是一个使用了 nestjs 作为基本框架的项目，他在整个博客应用中起的作用是:</p>
<p>调用其他类库，并按照一定的顺序执行整个构建工作流，如扫描读取所有 Markdown 文件并提取其元数据，根据元信息构造路由，根据路由信息构造 API 内容 等等。</p>
<p>所以作为整个 Monorepo 中具有唯一性的、没有被其他 sub-package 依赖的调用方项目，我为他设置了一个 Path Alias: <code>@-&gt; ./src</code></p>
<p>在子项目路径 &nbsp;<code>packages/application</code> 目录下，tsconfig.json 中的路径别称是:</p>
<pre class="hljs"><code>{
  <span class="hljs-attr">"compilerOptions"</span>: {
    <span class="hljs-attr">"paths"</span>: {
      <span class="hljs-attr">"@/*"</span>: [<span class="hljs-string">"src/*"</span>]
    }
  }
}
</code></pre>
<p>在 jestconfig 中也需要声明这个 Path Alias:</p>
<pre class="hljs"><code>{
  <span class="hljs-attr">"jest"</span>: {
    <span class="hljs-attr">"moduleNameMapper"</span>: {
      <span class="hljs-attr">"^@/(.*)$"</span>: <span class="hljs-string">"&lt;rootDir&gt;/src/$1"</span>
    }
  }
}
</code></pre>
<p>为了遵循原先的解决方案需求，为应对这种具有 Path Alias 的子项目，我的实践如下:</p>
<ul>
<li>子项目本身设立 Path Alias</li>
<li>子项目的测试代码结构与其他类库路径风格对齐</li>
<li>根目录在 jestconfig 下添加相关的 Path Alias 设置，即:</li>
</ul>
<pre class="hljs"><code>{
  <span class="hljs-attr">"jest"</span>: {
    <span class="hljs-attr">"moduleNameMapper"</span>: {
      <span class="hljs-attr">"^@/(.*)$"</span>: <span class="hljs-string">"&lt;rootDir&gt;/packages/application/src/$1"</span>
    }
  }
}
</code></pre>
<p>这样便能解决 Path Alias x UnitTesting 的问题。</p>
<h3 id="summarization">Summarization</h3>
<p>结合在项目中遇到的以上问题以及目前的实践方案，也反向引导出我们在项目中也需要遵循一些认为的、容易接受的约定。</p>
<p>总结这几个问题的解决思路，可以汇总成一下个情景。</p>
<p>我们在遇到 TypeScript + Jest + Monorepo 的场景时，需要遵循以下几种约定:</p>
<ul>
<li>带有 Path Alias 的子项目，尽量不要被其他子项目所依赖</li>
<li>所有子项目的测试文件路径表达式尽量一致</li>
</ul>
<p>在执行测试和构建方面，则需要注意以下的配置方式:</p>
<ul>
<li>在根目录下执行 Jest，Jest 的配置是所有子项目 Jest 配置的并集</li>
<li>在根目录下执行 Jest，Jest 的配置需要理解带 Path Alias 子项目的路径 Mapping (即需要根目录理解此子项目的 Mapping 配置)</li>
</ul>
<h3 id="more-complex-situation">More Complex Situation</h3>
<p>中间还会发现有一些更复杂的情况</p>
<ul>
<li>多个子项目的 tsconfig.json 不尽相同，无法合并出合理的并集?</li>
<li>子项目是一个前端项目，用到了很多不同的 loader 与插件，如 React/Vue ，根目录的配置是否也需要理解并安装这些 loader 呢?</li>
</ul>
<h2 id="references">References</h2>
<ul>
<li>Lerna at Github <a href="https://github.com/lerna/lerna">https://github.com/lerna/lerna</a></li>
<li>Javascript Monorepo with Lerna <a href="https://medium.com/@erzhtor/javascript-monorepo-with-lerna-5729d6242302">https://medium.com/@erzhtor/javascript-monorepo-with-lerna-5729d6242302</a></li>
</ul>
</div><div class="jss20"></div><div class="jss27"><img src="https://views.show/svg?key=monorepo-practice-in-typescript-projects&amp;x=0%25&amp;y=10%25" alt="views show"></div><a role="button" class="MuiChip-root jss28 MuiChip-clickable" tabindex="0" href="/tags/npm"><span class="MuiChip-label">NPM</span></a><a role="button" class="MuiChip-root jss28 MuiChip-clickable" tabindex="0" href="/tags/ci"><span class="MuiChip-label">CI</span></a><a role="button" class="MuiChip-root jss28 MuiChip-clickable" tabindex="0" href="/tags/typescript"><span class="MuiChip-label">Typescript</span></a><a role="button" class="MuiChip-root jss28 MuiChip-clickable" tabindex="0" href="/tags/monorepo"><span class="MuiChip-label">Monorepo</span></a><a role="button" class="MuiChip-root jss28 MuiChip-clickable" tabindex="0" href="/tags/lerna"><span class="MuiChip-label">Lerna</span></a><a role="button" class="MuiChip-root jss28 MuiChip-clickable" tabindex="0" href="/tags/jest"><span class="MuiChip-label">Jest</span></a><div id="disqus_thread"></div></div></div><div class="jss13"><nav class="jss21"><ol class="jss24"><li class="MuiTypography-root jss23 MuiTypography-body1" style="padding-left: 8px;">Contents</li><li class="MuiTypography-root jss25 MuiTypography-body1" style="padding-left: 16px;">Background</li><li class="MuiTypography-root jss25 MuiTypography-body1" style="padding-left: 24px;">Problems</li><li class="MuiTypography-root jss25 MuiTypography-body1" style="padding-left: 24px;">Unit Testing</li><li class="MuiTypography-root jss25 MuiTypography-body1" style="padding-left: 24px;">With Path Alias</li><li class="MuiTypography-root jss25 MuiTypography-body1" style="padding-left: 16px;">Example Project</li><li class="MuiTypography-root jss25 MuiTypography-body1" style="padding-left: 24px;">Example Project Introduction</li><li class="MuiTypography-root jss25 MuiTypography-body1" style="padding-left: 24px;">Example Project Folder Structure</li><li class="MuiTypography-root jss25 MuiTypography-body1" style="padding-left: 16px;">Solutions</li><li class="MuiTypography-root jss25 MuiTypography-body1" style="padding-left: 24px;">UnitTesting cross Monorepo</li><li class="MuiTypography-root jss25 MuiTypography-body1" style="padding-left: 24px;">Path Alias</li><li class="MuiTypography-root jss25 MuiTypography-body1" style="padding-left: 24px;">Summarization</li><li class="MuiTypography-root jss25 MuiTypography-body1" style="padding-left: 24px;">More Complex Situation</li><li class="MuiTypography-root jss25 MuiTypography-body1" style="padding-left: 16px;">References</li></ol></nav></div></div></main><div role="presentation" class="jss11" style="transform: scale(0); visibility: hidden;"><button class="MuiButtonBase-root MuiFab-root MuiFab-sizeSmall MuiFab-primary" tabindex="0" type="button" aria-label="scroll back to top"><span class="MuiFab-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path></svg></span><span class="MuiTouchRipple-root"></span></button></div></div></div><script src="/static/js/vendors.3f9647fd81d5343b4184.js"></script><script src="/static/js/main.cb992bfb23ee693ba85e.js"></script></body></html>