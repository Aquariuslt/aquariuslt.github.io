<!DOCTYPE html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><!--[if IE]><link rel="icon" href="/favicon.ico" /><![endif]--><title>Linux Mean 开发环境搭建 | Aquariuslt Blog</title><link href="/css/about.f196d9fa.css" rel="prefetch"><link href="/css/detail.550d548d.css" rel="prefetch"><link href="/js/about.c7f39767.js" rel="prefetch"><link href="/js/detail.0ea8bb28.js" rel="prefetch"><link href="/css/app.2d6b9bb1.css" rel="preload" as="style"><link href="/css/chunk-vendors.9bb7e852.css" rel="preload" as="style"><link href="/js/app.13ac62a3.js" rel="preload" as="script"><link href="/js/chunk-vendors.948d257a.js" rel="preload" as="script"><link href="/css/chunk-vendors.9bb7e852.css" rel="stylesheet"><link href="/css/app.2d6b9bb1.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="32x32" href="/img/icons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/img/icons/favicon-16x16.png"><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#1A73E8"><meta name="apple-mobile-web-app-capable" content="no"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="apple-mobile-web-app-title" content="Aquariuslt Blog"><link rel="apple-touch-icon" href="/img/icons/apple-touch-icon-152x152.png"><link rel="mask-icon" href="/img/icons/safari-pinned-tab.svg" color="#1A73E8"><meta name="msapplication-TileImage" content="/img/icons/msapplication-icon-144x144.png"><meta name="msapplication-TileColor" content="#000000"><link rel="stylesheet" type="text/css" href="/css/detail.550d548d.css"><script charset="utf-8" src="/js/detail.0ea8bb28.js"></script><meta data-vue-meta="1" name="og:site_name" content="Aquariuslt Blog"><meta data-vue-meta="1" name="og:type" content="website"><meta data-vue-meta="1" name="og:title" content="Linux Mean 开发环境搭建"><meta data-vue-meta="1" name="og:description" content="最近一个项目中需要用到Redis和 Node.js 操作 OracleDB,而 Windows 下开发就是屁事多. 恰好用到的这两个东西,都写明了官方不支持 Windows,Redis在 Widnows 下的版本是由微软的工程师们在维护. 在 Windows 下搭建好了环境之后,发现Redis在 Windows 下会有一些常见的崩溃情况,上网搜了下估计是 Windows 才会有的情况. 本篇主要介绍在 Linux(Ubuntu)下搭建 MEAN Stack 的相关内容,包括:
"><meta data-vue-meta="1" name="og:image" content="./cover.png"><meta data-vue-meta="1" name="og:type" content="article"><script data-vue-meta="1" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://blog.aquariuslt.com","name":"Aquariuslt Blog","position":1},{"@type":"ListItem","item":"https://blog.aquariuslt.com/posts","name":"Posts","position":2},{"@type":"ListItem","item":"https://blog.aquariuslt.com/posts/2015/12/13/ubuntu-mean-development-environment-setup","name":"Linux Mean 开发环境搭建","position":3}]}</script><script id="embed-disqus" data-timestamp="1571676929313" type="text/javascript" async="" src="//aquariuslt.disqus.com/embed.js"></script><link rel="prefetch" as="style" href="https://c.disquscdn.com/next/embed/styles/lounge.953a2bd009935f47a8e815c3ee2bfc5a.css"><link rel="prefetch" as="script" href="https://c.disquscdn.com/next/embed/common.bundle.bdf2715fe3d262793670748c6697b1f3.js"><link rel="prefetch" as="script" href="https://c.disquscdn.com/next/embed/lounge.bundle.df4113f81691d4ed6cccc5b74c6c17e8.js"><link rel="prefetch" as="script" href="https://disqus.com/next/config.js"><script src="https://c.disquscdn.com/next/embed/alfalfalfa.0823c767a3bc925f628afd9bed26c958.js" async="" charset="UTF-8"></script></head><body><div data-v-18dadf06="" id="app"><div data-v-18dadf06="" class="md-app md-app-side-drawer md-layout-row md-waterfall md-fixed md-theme-default"><div data-v-18dadf06="" class="md-drawer md-app-drawer md-theme-default md-left md-temporary"><div data-v-ac1b82fe="" data-v-18dadf06="" class="profile"><div data-v-ac1b82fe="" class="md-card md-theme-default"><div data-v-ac1b82fe="" class="md-card-header"><div data-v-ac1b82fe="" class="md-avatar md-theme-default"><img data-v-ac1b82fe="" src="https://img.aquariuslt.com/social/avator.png" alt="Avatar"></div><div data-v-ac1b82fe="" class="md-title">Aquariuslt</div><div data-v-ac1b82fe="" class="md-subhead">superaquariuslt@gmail.com</div></div></div></div><ul data-v-18dadf06="" class="md-list md-theme-default"><li data-v-18dadf06="" to="/" exact="" class="md-list-item"><a data-v-18dadf06="" href="/" class="md-list-item-router md-list-item-container md-button-clean" mdripple="true"><div class="md-list-item-content md-ripple"><i data-v-18dadf06="" class="mdi mdi-24px mdi-home"></i><span data-v-18dadf06="" class="md-list-item-text">Home</span> </div></a></li><li data-v-18dadf06="" to="/categories" exact="" class="md-list-item"><a data-v-18dadf06="" href="/categories" class="md-list-item-router md-list-item-container md-button-clean" mdripple="true"><div class="md-list-item-content md-ripple"><i data-v-18dadf06="" class="mdi mdi-24px mdi-shape"></i><span data-v-18dadf06="" class="md-list-item-text">Categories</span> </div></a></li><li data-v-18dadf06="" to="/tags" exact="" class="md-list-item"><a data-v-18dadf06="" href="/tags" class="md-list-item-router md-list-item-container md-button-clean" mdripple="true"><div class="md-list-item-content md-ripple"><i data-v-18dadf06="" class="mdi mdi-24px mdi-bookmark"></i><span data-v-18dadf06="" class="md-list-item-text">Tags</span> </div></a></li></ul> </div>  <main class="md-app-container md-flex md-layout-column md-theme-default md-scrollbar" style="padding-left: 0px;"><div data-v-18dadf06="" class="md-toolbar md-app-toolbar md-primary md-theme-default md-elevation-2 md-no-elevation" md-elevation="2" style="top: 0px;"><div data-v-18dadf06="" class="md-toolbar-row"><button data-v-18dadf06="" type="button" class="md-button md-icon-button md-theme-default" aria-label="menu"><div class="md-ripple"><div class="md-button-content"><i data-v-18dadf06="" class="mdi mdi-24px mdi-menu"></i></div> </div></button><span data-v-18dadf06="" class="md-title app-title">Linux Mean 开发环境搭建 | Aquariuslt Blog</span></div></div> <div class="md-app-scroller md-layout-column md-flex md-theme-default md-scrollbar"><div data-v-18dadf06="" class="md-content md-app-content md-flex md-theme-default"><div data-v-590589f6="" data-v-18dadf06="" class="detail md-layout md-gutter md-alignment-top-center"><div data-v-46cb6cfe="" data-v-590589f6="" class="md-layout md-gutter md-alignment-top-center md-layout-item md-size-100"><div data-v-46cb6cfe="" class="breadcrumbs"><span data-v-46cb6cfe=""><a data-v-46cb6cfe="" href="/" class="breadcrumbs-item"> Aquariuslt Blog</a><span data-v-46cb6cfe="">&gt;</span></span><span data-v-46cb6cfe=""><a data-v-46cb6cfe="" href="/posts" class="breadcrumbs-item"> Posts</a><span data-v-46cb6cfe="">&gt;</span></span><span data-v-46cb6cfe=""><a data-v-46cb6cfe="" href="/posts/2015/12/13/ubuntu-mean-development-environment-setup" class="breadcrumbs-item router-link-exact-active router-link-active"> Linux Mean 开发环境搭建</a><!----></span></div></div><div data-v-48e13d92="" data-v-590589f6="" class="md-layout md-gutter md-alignment-top-center md-layout-item md-size-100"><div data-v-48e13d92="" class="md-card article-detail md-theme-default"><div data-v-48e13d92="" class="md-card-media article-cover"><img data-v-48e13d92="" src="/posts/2015/12/13/ubuntu-mean-development-environment-setup/cover.png" alt="cover"></div><div data-v-48e13d92="" class="md-card-content markdown-body"><h1>Linux Mean 开发环境搭建</h1>
<h2>Background</h2>
<p>最近一个项目中需要用到<code>Redis</code>和 Node.js 操作 OracleDB,而 Windows 下开发就是屁事多. 恰好用到的这两个东西,都写明了官方不支持 Windows,<code>Redis</code>在 Widnows 下的版本是由微软的工程师们在维护. 在 Windows 下搭建好了环境之后,发现<code>Redis</code>在 Windows 下会有一些常见的崩溃情况,上网搜了下估计是 Windows 才会有的情况. 本篇主要介绍在 Linux(Ubuntu)下搭建 MEAN Stack 的相关内容,包括:</p>
<ul>
<li>Linux 下<code>Redis</code>的安装与配置</li>
<li>Ubuntu 下<code>Node.js</code>与<code>MongoDB</code>安装与配置</li>
<li>Linux 下<code>oracledb</code>的安装与配置</li>
<li>Ubuntu 下<code>IntelliJ IDEA</code>的配置</li>
</ul>
<blockquote>
<p>可能看起来有点奇怪,为什么我会<code>Linux</code>,<code>Ubuntu</code>这样穿插这顺序反过来写这是因为由于<code>Ubuntu</code>安装<code>Node.js</code>这方面我使用的是 <code>apt-get</code>来管理安装包而<code>oracledb</code>又是<code>Node.js</code>的一个类库</p>
</blockquote>
<h2>Linux 下 Redis 的安装与配置</h2>
<h3>下载</h3>
<p>从官方地址 <a href="https://github.com/antirez/redis/archive/2.8.23.tar.gz">https://github.com/antirez/redis/archive/2.8.23.tar.gz</a> 下载. 由于项目用到的 Redis 版本是 2.8,所以下的是 2.8 版本.</p>
<h3>安装</h3>
<p>将 redis2.8.23.tar.gz 解压到任意文件夹.</p>
<blockquote>
<p>目前按照个人习惯还是放在 home 下面一个叫 server 的目录但是 unix 系统的路径与程序摆放位置应该是大有讲究的,近期将会加强研究之后更新结论先凑合着放</p>
</blockquote>
<p>此时文件列表应该如下:</p>
<pre><code>Macbook:redis-2.8.23 Aquariuslt$ tree -L 1
.
├── 00-RELEASENOTES
├── BUGS
├── CONTRIBUTING
├── COPYING
├── INSTALL
├── MANIFESTO
├── Makefile
├── README
├── deps
├── redis.conf
├── runtest
├── runtest-sentinel
├── sentinel.conf
├── src
├── tests
└── utils

4 directories, 12 files

</code></pre>
<p>看到有<code>makefile</code>就知道需要自己编译一边,其实这里按照官网的 Installation 就可以. 直接输入<code>make</code>编译</p>
<pre><code>$ wget https://download.redis.io/releases/redis-3.0.5.tar.gz
$ tar xzf redis-3.0.5.tar.gz
$ cd redis-3.0.5
$ make
</code></pre>
<h3>以服务运行</h3>
<p>在<code>Redis</code>安装目录下有一些脚本,执行之后,帮助以 Service 运行</p>
<pre><code>
In order to install Redis binaries into /usr/local/bin just use:

    % make install

You can use "make PREFIX=/some/other/directory install" if you wish to use a
different destination.

Make install will just install binaries in your system, but will not configure
init scripts and configuration files in the appropriate place. This is not
needed if you want just to play a bit with Redis, but if you are installing
it the proper way for a production system, we have a script doing this
for Ubuntu and Debian systems:

    % cd utils
    % ./install_server.sh

The script will ask you a few questions and will setup everything you need
to run Redis properly as a background daemon that will start again on
system reboots.

You'll be able to stop and start Redis using the script named
/etc/init.d/redis_&lt;portnumber&gt;, for instance /etc/init.d/redis_6379.
</code></pre>
<p>如果执行<code>make install</code>命令,则自动 ln 到<code>/usr/local/bin</code> 如果执行<code>utils</code>路径下的<code>install_server.sh</code>则会添加启动项,开机自动运行.</p>
<h2>Ubuntu 下 Node.js 与 MongoDB 的安装与配置</h2>
<blockquote>
<p>在 Linux 下<code>Node.js</code>的安装并不像<code>Windows</code>,<code>OS X</code>有.msi,.pkg 安装包走 UI 安装. 但是在各个发行版的 Linux 下都有自己对应的包管理器. <code>Ubuntu</code>就有自己的包管理器<code>apt-get</code>(但是会有坑)</p>
</blockquote>
<p>Ubuntu 安装<code>Node.js</code>可以分成如下步骤</p>
<ol>
<li>更新包管理器的版本,使之能够获取最新版本的应用程序包</li>
<li>通过包管理器,安装<code>Node.js</code></li>
<li>通过<code>npm</code>再更新一次<code>Node.js</code></li>
</ol>
<h3>更新 Ubuntu 的包管理器</h3>
<pre><code>$apt-get update
</code></pre>
<h3>通过包管理器安装 Node.js</h3>
<pre><code>$apt-get install nodejs-legacy
</code></pre>
<p>通过此命令安装的是一个比较老版本的 Node.js 输入查看版本命令大概是 node v0.10 和 npm v1.14</p>
<blockquote>
<p>我也不知道为什么 Ubuntu 的 package list 更新了之后 Node.js 包版本还是那么低.. 下面更新的 Node.js 版本以 2015-12-13 官网的稳定版本为准</p>
</blockquote>
<pre><code>node -v &amp;&amp; npm -v
</code></pre>
<p>这时候,首先先升级 <code>npm</code> 到 <code>npm3</code></p>
<pre><code>$npm install -g npm
</code></pre>
<blockquote>
<p>此时 npm 的版本应该更新到 v3.5.1+</p>
</blockquote>
<p>然后通过<code>npm</code>安装一个用<code>node</code>去切换<code>node</code>版本的库,叫做<code>n</code></p>
<pre><code>$npm install -g n
</code></pre>
<p>接着用<code>n</code>去安装所需版本的<code>node.js</code></p>
<pre><code>$n v4.2.3
</code></pre>
<p>重启电脑之后在查看<code>node</code>和<code>npm</code>版本,应该如下图 <img src="/posts/2015/12/13/ubuntu-mean-development-environment-setup/update-nodejs.png" alt="更新Node.js"></p>
<h2>Linux 下 Node-OracleDB 的配置</h2>
<p>Linux 下搭建好 node-oracledb 也是相当操蛋. 大概需要做下面几个工作:</p>
<ul>
<li>下载 version &gt;= 11.2 的 OracleInstantClient(basic&amp;sdk)</li>
<li>设置环境变量,供构建 npm install oracledb 构建使用</li>
</ul>
<h3>下载 OracleInstantClient for Linux</h3>
<p>官网还要登陆下载,太过傻逼.所以放出了个某度的链接 <a href="https://pan.baidu.com/s/1boxV2iV">https://pan.baidu.com/s/1boxV2iV</a></p>
<h3>设置环境变量</h3>
<p>先将下载的两个 zip 包解压到<code>/opt/oracle/instantclient</code>下.</p>
<blockquote>
<p>官方推荐,可自行替换路径</p>
</blockquote>
<p>然后修改全局的环境变量.</p>
<blockquote>
<p><strong>注意</strong> 这里说的是 <strong>全局变量</strong>,这里曾经被坑过一次. 通过命令行的 <code>export PATH=XXX:PATH</code>之类的命令.只能作为临时变量,重启之后就会失效而 Linux 的环境变量,跟 Windows 类似,也分成全局的环境变量和当前用户的环境变量. 在系统启动之后,先读取全局变量,用户登陆之后,再继承全局环境变量的前提下,读取当前用户的环境变量</p>
</blockquote>
<pre><code>$sudo gedit /etc/profile
</code></pre>
<p>在底部添加如下内容</p>
<pre><code># Export Oracle Client Varirable
export OCI_LIB_DIR=/opt/oracle/instantclient
export OCI_INC_DIR=/OPT/oracle/instantclient
export ORACLE_HOME=$OCI_LIB_DIR
export LD_LIBRARY_PATH=/opt/oracle/instantclient:$LD_LIBRARY_PATH
</code></pre>
<p><img src="/posts/2015/12/13/ubuntu-mean-development-environment-setup/add-oracle-cli-global-env-var.png" alt="添加Oracle Client 相关全局环境变量"></p>
<p>此时执行命令安装 <code>oracledb</code> 大概应该不会出问题了</p>
<blockquote>
<p>其实还有个小问题,<code>oracledb</code>得必须是 1.3.0 以上的版本..不然爆的错我也无法入手解决</p>
</blockquote>
<pre><code>$npm install oracledb
</code></pre>
<h2>Ubuntu 下 IntelliJ IDEA 的配置</h2>
<p>终于到重头戏了.其实我就是想说这个在 GNOME 下安装 Idea 遵循下面几步</p>
<ol>
<li>安装 JDK,设置 JDK 相关环境变量</li>
<li>配置 Idea 在 Ubuntu 的启动图标</li>
<li>一些关于 Idea 在 Linux 下与 Widnows/Mac 不同的特殊配置</li>
</ol>
<h3>安装 JDK</h3>
<p>从 Oracle 官网下载 Linux 版本 jdk,解压到<code>/usr/lib/jvm/jdk8</code>下.</p>
<blockquote>
<p>该路径也是个人喜好,官网推荐这么做就照做了因为 Idea 启动的时候需要检查 Java 的安装.且是按照<code>IDEA_JDK</code>, <code>JDK_HOME</code>,<code>JAVA_HOME</code>的顺序来进行查找,只要其中之一存在且对应了 JDK 的路径即可</p>
</blockquote>
<p>所以,在系统中添加全局环境变量如下图</p>
<pre><code>$sudo gedit /etc/profile
</code></pre>
<p>在底部添加</p>
<pre><code># Set JAVA_HOME fOR Maven/Idea Settings
export JAVA_HOME=/usr/lib/jvm/jdk8
export JDK_HOME=$JAVA_HOME
export IDEA_JDK=$JAVA_HOME
export PATH=$PATH:$JAVA_HOME/bin
</code></pre>
<p>保存后,查看 java 版本</p>
<pre><code>$java -version
</code></pre>
<p><img src="/posts/2015/12/13/ubuntu-mean-development-environment-setup/config-jdk-path.png" alt="配置JDK路径"></p>
<h3>配置 Idea 在 Ubuntu 中的启动图标</h3>
<p>默认情况下,通过 Idea 目录下的<code>/bin/idea.sh</code>即可启动 IdeaUI 但是为了能够显示 Ubuntu 的 docker 里面(左边那条任务栏,不知道叫什么东西,叫 docker 吧)</p>
<p>需要在<code>/usr/share/applications</code>下新建一个<code>intellij-idea.desktop</code> 加个配置文件</p>
<blockquote>
<p>我本地的 Idea 解压后的目录在<code>/home/dev/Applications/IntellijIdea15</code></p>
</blockquote>
<pre><code>[Desktop Entry]
Type=Application
Name=IntelliJ IDEA
Comment=The best Java and MEAN IDE
Icon=/home/dev/Applications/IntellijIdea15/bin/idea.png
Exec=/home/dev/Applications/IntellijIdea15/bin/idea.sh
Terminal=false
Categories=Development;IDE;Java;
</code></pre>
<p><img src="/posts/2015/12/13/ubuntu-mean-development-environment-setup/add-app-launch-icon.png" alt="添加Ubuntu Applications启动图标"></p>
<h3>Idea 在 Ubuntu 下一些特殊的配置</h3>
<blockquote>
<p>虽然都是类 Unix 系统,Idea 跟 Mac 在一些读取环境变量时候的做法不大一样. 本质上其实还是我对他认识不够深,还找不到原因..以后找到会更新 Liux 下在<code>run configuration</code>里面添加新的<code>Node.js</code>脚本或者<code>shell</code>脚本的时候,有一些不一样的地方就是通过 Ubuntu 桌面启动 Idea,会读不到用户级别的环境变量. 所以有一在配置一些的脚本的时候,需要确保运行时的环境变量,查看方法</p>
</blockquote>
<p>在<code>Run Configurations</code>-&gt;<code>Environment Variables</code>-&gt;<code>Include Parents Variables</code>-&gt;<code>Show</code> 查看所有环境变量. 如果没有,烦请自己加上,为求能达到与 Terminal 运行同样的结果.</p>
<p><img src="/posts/2015/12/13/ubuntu-mean-development-environment-setup/check-run-configuration.png" alt="查看Run Configurations全局变量"></p>
</div><div data-v-48e13d92="" class="md-card-content"><div data-v-15189bc8="" data-v-48e13d92="" tabindex="0" class="md-chip md-theme-default md-clickable"><div class="md-ripple"><span data-v-15189bc8="" class=""> Ubuntu </span> </div> <!----></div><div data-v-15189bc8="" data-v-48e13d92="" tabindex="0" class="md-chip md-theme-default md-clickable"><div class="md-ripple"><span data-v-15189bc8="" class=""> Linux </span> </div> <!----></div><div data-v-15189bc8="" data-v-48e13d92="" tabindex="0" class="md-chip md-theme-default md-clickable"><div class="md-ripple"><span data-v-15189bc8="" class=""> IntelliJ IDEA </span> </div> <!----></div></div><div data-v-48e13d92="" class="md-card-content"><div data-v-7fa946ff="" data-v-48e13d92="" class="comment"><div data-v-7fa946ff="" id="disqus_thread"><iframe id="dsq-app2716" name="dsq-app2716" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="https://disqus.com/embed/comments/?base=default&amp;f=aquariuslt&amp;t_i=-posts-2015-12-13-ubuntu-mean-development-environment-setup&amp;t_u=https%3A%2F%2Fblog.aquariuslt.com%2Fposts%2F2015%2F12%2F13%2Fubuntu-mean-development-environment-setup&amp;t_d=Linux%20Mean%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%20%7C%20Aquariuslt%20Blog&amp;t_t=Linux%20Mean%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%20%7C%20Aquariuslt%20Blog&amp;s_o=default#version=f274d4b819b5f36115bcd7094ebe0b59" style="width: 1px !important; min-width: 100% !important; border: none !important; overflow: hidden !important; height: 685px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe></div></div></div></div></div></div></div></div></main> <!----></div></div><script src="/service-worker.js"></script><script type="text/javascript" src="/js/chunk-vendors.948d257a.js"></script><script type="text/javascript" src="/js/app.13ac62a3.js"></script><iframe style="display: none;"></iframe></body>